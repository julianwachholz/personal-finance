version: "3"
services:
  web:
    image: shinywaffle:latest
    build:
      context: .
      dockerfile: ./Dockerfile
      args:
        DJANGO_ENV: production
    volumes:
      - ./static:/app/static
    env_file: .env
    command: /app/config/run.sh
    ports:
      - 9066:8000
    restart: "no"
    # healthcheck:
    #   test: curl --fail http://localhost:8000/health/?format=json || exit 1
    #   interval: 1m
    #   timeout: 5s
    #   retries: 2
    #   start_period: 1m

networks:
  default:
    external:
      name: db
